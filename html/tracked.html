<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tracked &mdash; anadama 0.1.2 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="anadama 0.1.2 documentation" href="index.html" />
    <link rel="next" title="helpers" href="helpers.html" />
    <link rel="prev" title="backends" href="backends.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tracked">
<h1>tracked<a class="headerlink" href="#tracked" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-anadama.tracked"></span><dl class="class">
<dt id="anadama.tracked.Base">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">Base</code><a class="reference internal" href="_modules/anadama/tracked.html#Base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Base" title="Permalink to this definition">¶</a></dt>
<dd><p>The Dependency object is the tool for specifying task father-child
relationships. Dependency objects can be used in either
<code class="docutils literal"><span class="pre">targets</span></code> or <code class="docutils literal"><span class="pre">depends</span></code> arguments of
<a class="reference internal" href="workflow.html#anadama.workflow.Workflow.add_task" title="anadama.workflow.Workflow.add_task"><code class="xref py py-meth docutils literal"><span class="pre">anadama.workflow.Workflow.add_task()</span></code></a>. Often, these targets or
dependencies are specified by strings or <a class="reference internal" href="index.html#anadama.Task" title="anadama.Task"><code class="xref py py-class docutils literal"><span class="pre">anadama.Task</span></code></a>
objects and instantiated into the appropriate Base
subclass with <a class="reference internal" href="#anadama.tracked.auto" title="anadama.tracked.auto"><code class="xref py py-func docutils literal"><span class="pre">anadama.tracked.auto()</span></code></a>; this behavior depends on the
arguments to <a class="reference internal" href="workflow.html#anadama.workflow.Workflow.add_task" title="anadama.workflow.Workflow.add_task"><code class="xref py py-meth docutils literal"><span class="pre">anadama.workflow.Workflow.add_task()</span></code></a>.</p>
<p>A dependency of the same name will be defined multiple times in
the normal use of AnADAMA. To make it such that many calls of a
dependency constructor or use of the same argument to
<a class="reference internal" href="#anadama.tracked.auto" title="anadama.tracked.auto"><code class="xref py py-func docutils literal"><span class="pre">anadama.tracked.auto()</span></code></a> result in the same dependency instance being
returned, a little bit of black magic involving
<code class="xref py py-meth docutils literal"><span class="pre">anadama.tracked.Base.__new__()</span></code> is required. The price for
such magics is that subclasses of Base must define the
<code class="docutils literal"><span class="pre">init</span></code> method to initialize the dependency, instead of the more
commonly used <code class="docutils literal"><span class="pre">__init__</span></code> method. The <code class="docutils literal"><span class="pre">init</span></code> method is only
called once per dependency, while <code class="docutils literal"><span class="pre">__init__</span></code> is called every
time any Base sublcasses are
instantiated. Base subclasses must also define a
<code class="docutils literal"><span class="pre">key()</span></code> staticmethod. The <code class="docutils literal"><span class="pre">key()</span></code> staticmethod is used to
lookup already existing instances of that dependency; return
values from the <code class="docutils literal"><span class="pre">key()</span></code> method must be unique to that
dependency.</p>
<p>Unrelated to the quasi-singleton magics above, sublcasses of
Base must define a <code class="docutils literal"><span class="pre">compare()</span></code> method. See
<a class="reference internal" href="#anadama.tracked.Base.compare" title="anadama.tracked.Base.compare"><code class="xref py py-meth docutils literal"><span class="pre">anadama.tracked.Base.compare()</span></code></a> for more documentation.</p>
<dl class="method">
<dt id="anadama.tracked.Base.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Base.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Base.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce the iterator that is used to determine if this dependency
has changed. This method is called twice: once before the
task&#8217;s actions have been executed for all of a task&#8217;s
dependencies and once after all of a task&#8217;s actions are
executed for each of the task&#8217;s targets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">iterator</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="anadama.tracked.Base.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Base.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Base.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the thing that this object represents
exists. Examples include whether a file exists, or whether a
row in a database exists. This method is used when the
workflow is not in strict mode and the user tries to depend on
a Tracked object that isn&#8217;t the target of another task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="anadama.tracked.Base.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Base.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Base.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the dependency. Only run once for each new dependency
object with this <code class="docutils literal"><span class="pre">key()</span></code>.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.Base.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>the_key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Base.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Base.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the unique key for retrieving this dependency from the
storage backend and for comparing against other dependencies
of the same type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="anadama.tracked.Base.must_preexist">
<code class="descname">must_preexist</code><em class="property"> = True</em><a class="headerlink" href="#anadama.tracked.Base.must_preexist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.Container">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">Container</code><span class="sig-paren">(</span><em>namespace=None</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Container"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Container" title="Permalink to this definition">¶</a></dt>
<dd><p>Track a collection of small strings. This is useful for rerunning
tasks based on whether a flag has changed when running a
command. Using <a class="reference internal" href="#anadama.tracked.TrackedString" title="anadama.tracked.TrackedString"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedString</span></code></a> for small
strings can run into collisions between workflows that use the
same backend. Consider using <code class="docutils literal"><span class="pre">logging</span> <span class="pre">=</span>
<span class="pre">TrackedString(&quot;debug&quot;)</span></code> in script_a.py and <code class="docutils literal"><span class="pre">logging</span> <span class="pre">=</span>
<span class="pre">TrackedString(&quot;warning&quot;)</span></code> in script_b.py. If you change
script_a.py to <code class="docutils literal"><span class="pre">logging</span> <span class="pre">=</span> <span class="pre">TrackedString(&quot;warning&quot;)</span></code> after
running script_b.py, script_a.py won&#8217;t rerun tasks that depend on
the TrackedString assigned to <code class="docutils literal"><span class="pre">logging</span></code>.</p>
<p>This class solves TrackedString collisions by prepending a
user-provided (or auto-generated) namespace to each key-value pair
in the collection. The auto-generated namespace is unique to the
script or module creating the Container, so expect to have
a bunch of tasks rerun if you rename a module or script between
runs.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">anadama.tracked</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span> <span class="o">=</span> <span class="n">anadama</span><span class="o">.</span><span class="n">tracked</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">alpha</span>
<span class="go">&lt;anadama.tracked.TrackedVariable object at 0x7f66445fa490&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">conf</span><span class="p">[</span><span class="s1">&#39;beta&#39;</span><span class="p">])</span>
<span class="go">&#39;2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">beta</span>
<span class="go">&lt;anadama.tracked.TrackedVariable object at 0x7f66445fa4d0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">beta</span><span class="p">)</span>
<span class="go">&#39;7&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="anadama.tracked.Container.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Container.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Container.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.Container.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Container.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Container.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.Container.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>namespace=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#Container.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.Container.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.DependencyIndex">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">DependencyIndex</code><a class="reference internal" href="_modules/anadama/tracked.html#DependencyIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.DependencyIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps track of what dependencies belong to what class and provides
efficient lookups of what task produces what dependency. Use
<code class="docutils literal"><span class="pre">DependencyIndex[dependency_obj]</span></code> to get the task that makes that
dependency.</p>
<dl class="method">
<dt id="anadama.tracked.DependencyIndex.link">
<code class="descname">link</code><span class="sig-paren">(</span><em>dep</em>, <em>task_or_none</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#DependencyIndex.link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.DependencyIndex.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Link a dependency to a task. Used later for lookups with
__getitem__.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dep</strong> (subclass of <a class="reference internal" href="#anadama.tracked.Base" title="anadama.tracked.Base"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.Base</span></code></a>) &#8211; The dependency to track</li>
<li><strong>task_or_none</strong> (<a class="reference internal" href="index.html#anadama.Task" title="anadama.Task"><code class="xref py py-class docutils literal"><span class="pre">anadama.Task</span></code></a> or None) &#8211; The task that&#8217;s supposed to create this
dependency. Use None if the dependency isn&#8217;t created by a
task but exists prior to any tasks running.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.HugeTrackedFile">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">HugeTrackedFile</code><a class="reference internal" href="_modules/anadama/tracked.html#HugeTrackedFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.HugeTrackedFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Track a large file. Large being large enough that you don&#8217;t want to
read through the entire file to create a checksum of its contents.</p>
<p>This dependency class is the fastest option for tracking file
changes for large files. Speed comes at the cost of safety; only
the size and the modification time are used to determine
freshness.</p>
<dl class="method">
<dt id="anadama.tracked.HugeTrackedFile.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#HugeTrackedFile.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.HugeTrackedFile.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedDirectory">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedDirectory</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedDirectory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedDirectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Track a directory. A directory is considered changed if it&#8217;s
removed, the modify time has changed, the list of files within the
directory has changed, or if any of the files within the directory
have changed size or modify times.</p>
<dl class="method">
<dt id="anadama.tracked.TrackedDirectory.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedDirectory.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedDirectory.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedDirectory.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedDirectory.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedDirectory.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedExecutable">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedExecutable</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedExecutable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedExecutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Track a script or binary executable.</p>
<dl class="method">
<dt id="anadama.tracked.TrackedExecutable.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedExecutable.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedExecutable.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedExecutable.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedExecutable.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedExecutable.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedExecutable.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>name</em>, <em>version_cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedExecutable.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedExecutable.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the dependency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Name of a script on the shell $PATH or name of
the file to track</li>
<li><strong>version_cmd</strong> &#8211; Shell string to execute to get the
binary or script&#8217;s version</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.TrackedExecutable.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedExecutable.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedExecutable.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedFile">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedFile</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Track a small file. Small being small enough that you don&#8217;t mind
that the entire file is read to create a checksum of its contents.</p>
<p>This dependency class is the safest option for tracking file
changes. Safety comes at the cost of disk IO; all file contents
are read to create a checksum.</p>
<dl class="method">
<dt id="anadama.tracked.TrackedFile.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFile.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFile.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedFile.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFile.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFile.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedFile.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFile.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFile.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the dependency.
:param fname: The filename to keep track of
:type fname: str</p>
</dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.TrackedFile.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFile.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFile.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedFilePattern">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedFilePattern</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFilePattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFilePattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Track several files according to a bash-style globbing
pattern. Uses <a class="reference external" href="https://docs.python.org/2/library/glob.html#glob.glob" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">glob.glob()</span></code></a> under the hood.  A Glob is
considered changed if the names of the matched files changes, or
any of the matched files change in size or modify time.</p>
<dl class="method">
<dt id="anadama.tracked.TrackedFilePattern.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFilePattern.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFilePattern.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedFilePattern.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFilePattern.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFilePattern.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedFunction">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedFunction</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Useful for things like database lookups or API calls. The function
must return a hashable type. For a tiered comparison method like
that seen in <a class="reference internal" href="#anadama.tracked.TrackedFile" title="anadama.tracked.TrackedFile"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedFile</span></code></a>, it&#8217;s best to create
your own subclass of Base and override the <code class="docutils literal"><span class="pre">compare()</span></code>
method.</p>
<dl class="method">
<dt id="anadama.tracked.TrackedFunction.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFunction.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFunction.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedFunction.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>key</em>, <em>fn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFunction.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFunction.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.TrackedFunction.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedFunction.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedFunction.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="anadama.tracked.TrackedFunction.must_preexist">
<code class="descname">must_preexist</code><em class="property"> = False</em><a class="headerlink" href="#anadama.tracked.TrackedFunction.must_preexist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedString">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedString</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedString" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="anadama.tracked.TrackedString.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedString.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedString.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedString.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedString.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedString.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the dependency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>s</strong> (<em>str or unicode</em>) &#8211; The string to keep track of</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.TrackedString.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedString.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedString.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="anadama.tracked.TrackedString.must_preexist">
<code class="descname">must_preexist</code><em class="property"> = False</em><a class="headerlink" href="#anadama.tracked.TrackedString.must_preexist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="anadama.tracked.TrackedVariable">
<em class="property">class </em><code class="descclassname">anadama.tracked.</code><code class="descname">TrackedVariable</code><a class="reference internal" href="_modules/anadama/tracked.html#TrackedVariable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedVariable" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="anadama.tracked.TrackedVariable.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedVariable.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedVariable.compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="anadama.tracked.TrackedVariable.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>namespace</em>, <em>k</em>, <em>v</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedVariable.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedVariable.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="anadama.tracked.TrackedVariable.key">
<em class="property">static </em><code class="descname">key</code><span class="sig-paren">(</span><em>ns</em>, <em>k</em>, <em>v</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#TrackedVariable.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.TrackedVariable.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="anadama.tracked.TrackedVariable.must_preexist">
<code class="descname">must_preexist</code><em class="property"> = False</em><a class="headerlink" href="#anadama.tracked.TrackedVariable.must_preexist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="anadama.tracked.any_different">
<code class="descclassname">anadama.tracked.</code><code class="descname">any_different</code><span class="sig-paren">(</span><em>ds</em>, <em>backend</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#any_different"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.any_different" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether any dependencies have changed since last save.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ds</strong> (instances of any <a class="reference internal" href="#anadama.tracked.Base" title="anadama.tracked.Base"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.Base</span></code></a> subclass) &#8211; The dependencies in question</li>
<li><strong>backend</strong> (instances of any <a class="reference internal" href="backends.html#anadama.backends.BaseBackend" title="anadama.backends.BaseBackend"><code class="xref py py-class docutils literal"><span class="pre">anadama.backends.BaseBackend</span></code></a> subclass) &#8211; Backend to query past results of a dependency object</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="anadama.tracked.auto">
<code class="descclassname">anadama.tracked.</code><code class="descname">auto</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/anadama/tracked.html#auto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#anadama.tracked.auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate a string, function or task into the appropriate subclass
of <a class="reference internal" href="#anadama.tracked.Base" title="anadama.tracked.Base"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.Base</span></code></a>. Tildes and shell
variables are expanded using <a class="reference external" href="https://docs.python.org/2/library/os.path.html#os.path.expanduser" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">os.path.expanduser()</span></code></a> and
<a class="reference external" href="https://docs.python.org/2/library/os.path.html#os.path.expandvars" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">os.path.expandvars()</span></code></a>. If that&#8217;s not your game, use
<a class="reference internal" href="#anadama.tracked.TrackedDirectory" title="anadama.tracked.TrackedDirectory"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedDirectory</span></code></a> or
<a class="reference internal" href="#anadama.tracked.TrackedFile" title="anadama.tracked.TrackedFile"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedFile</span></code></a> as appropriate. The current
mapping is as follows:</p>
<ul class="simple">
<li>Subclasses of <a class="reference internal" href="#anadama.tracked.Base" title="anadama.tracked.Base"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.Base</span></code></a> are returned as is</li>
<li>Strings ending in &#8216;/&#8217; <code class="docutils literal"><span class="pre">-&gt;</span></code> <a class="reference internal" href="#anadama.tracked.TrackedDirectory" title="anadama.tracked.TrackedDirectory"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedDirectory</span></code></a></li>
<li>Strings not ending in &#8216;/&#8217; <code class="docutils literal"><span class="pre">-&gt;</span></code> <a class="reference internal" href="#anadama.tracked.TrackedFile" title="anadama.tracked.TrackedFile"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedFile</span></code></a></li>
<li>Instances of subclasses of <a class="reference internal" href="index.html#anadama.Task" title="anadama.Task"><code class="xref py py-class docutils literal"><span class="pre">anadama.Task</span></code></a> are handled
specially by <a class="reference internal" href="workflow.html#anadama.workflow.Workflow.add_task" title="anadama.workflow.Workflow.add_task"><code class="xref py py-meth docutils literal"><span class="pre">anadama.workflow.Workflow.add_task()</span></code></a> and
are returned as is</li>
<li>Functions or other callables <code class="docutils literal"><span class="pre">-&gt;</span></code> <a class="reference internal" href="#anadama.tracked.TrackedFunction" title="anadama.tracked.TrackedFunction"><code class="xref py py-class docutils literal"><span class="pre">anadama.tracked.TrackedFunction</span></code></a></li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> &#8211; The object to be translated into a dependency object</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="backends.html" title="previous chapter">backends</a></li>
      <li>Next: <a href="helpers.html" title="next chapter">helpers</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tracked.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Randall Schwager and the Huttenhower Lab.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/tracked.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>